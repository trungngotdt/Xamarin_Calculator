version: 2
jobs:
  build:
    docker:
      - image: mono
    steps:
      
      - run: apt-get update
      - run: apt-get upgrade -y
      - run: apt-get install -y software-properties-common
      - run: add-apt-repository ppa:webupd8team/java
      - run: apt-get update
      - run: apt-get install -y oracle-java8-installer
      - run: apt-get install -y oracle-java8-set-default
      - run: export JAVA_HOME="/usr/lib/jvm/java-8-oracle"
      - run: export JRE_HOME="/usr/lib/jvm/java-8-oracle/jre"
      - run: apt update
      - run: apt-get install -y mono-complete
      - run: wget http://ftp.hk.debian.org/debian/pool/main/libz/libzip/libzip4_1.1.2-1.1+b1_amd64.deb
      - run: dpkg -i libzip4_1.1.2-1.1+b1_amd64.deb
      - run:
          name: install
          command: apt-get install -y wget && wget https://jenkins.mono-project.com/view/Xamarin.Android/job/xamarin-android-linux/lastSuccessfulBuild/Azure/processDownloadRequest/xamarin-android/xamarin.android-oss_8.3.99.186_amd64.deb && dpkg -i xamarin.android-oss_8.3.99.186_amd64.deb
      - run:
          name: nuget
          command: nuget restore Xamarin_Calculator.sln
      - run:
          name: xamarin
          command: msbuild Xamarin_Calculator.sln
      
          
